
% https://eegg.wordpress.com/2010/01/25/page-margins-in-principle-and-practice/
% naieve single page canon
% pretty much only works for 2:3

\startenvironment naieve

	\setuppagenumbering[alternative=singlesided]

	\startMPdefinitions
		vardef canon(expr h, w) =
			path p, q;
			path a, b;
			pair r[];

			p := (0, 0) -- (w, h);
			q := (w, 0) -- (0, h);

			a := (0, .5h + .5w) -- (w, .5h + .5w); % top
			b := (0, .5h - .5w) -- (w, .5h - .5w); % bottom

			z0 = p intersectionpoint a; % top right
			z1 = q intersectionpoint a; % top left

			draw fullcircle scaled w shifted (.5w, .5h) withcolor blue;

			draw p withcolor blue;
			draw q withcolor blue;
%			draw a withcolor blue;
%			draw b withcolor blue;

%			draw (xpart z0, 0) -- (xpart z0, h) withcolor red;
%			draw (xpart z1, 0) -- (xpart z1, h) withcolor red;

			r0 = (xpart z1, .5h + .5w); % top left
			r1 = (xpart z0, .5h + .5w); % top right
			r2 = (xpart z0, .5h - .5w); % bottom right
			r3 = (xpart z1, .5h - .5w); % bottom left

			r
		enddef;
	\stopMPdefinitions

\stopenvironment


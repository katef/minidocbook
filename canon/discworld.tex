
% layout of Corgi editions of Terry Pratchettâ€™s Discworld books
% https://eegg.wordpress.com/2010/01/25/page-margins-in-principle-and-practice/
% intended for 2:3
% no header, only footer

\startenvironment discworld

	\startMPdefinitions
		vardef canon(expr h, w) =
			path p, q, g;
			path m, n, o;
			path t, v, u;
			pair r[];

			p := (w,  0) -- (0, .5h); % bottom half-page diagonal
			q := (w,  h) -- (0, .5h); % top half-page diagonal
			g := (w,  h) -- (0, 0); % one-page diagonal

			z0 = p intersectionpoint g; % centre point

			m := (xpart z0, 0) -- (xpart z0, h); % vertical
			n := (w, 0) -- (xpart z0, h); % left diagonal
			o := z0 -- (-xpart z0, 0); % projection off edge

			z1 = o intersectionpoint ((0, 0) -- (0, h)); % edge

			t := z1 -- (xpart z0, 0); % crossbar

			z2 = t intersectionpoint g; % bottom left

			v := (0, ypart z2) -- (w, ypart z2); % bottom

			z3 = v intersectionpoint n; % bottom right

			u := (xpart z3, 0) -- (xpart z3, h); % right

			z4 = u intersectionpoint g; % top right

			draw p withcolor blue;
			draw q withcolor blue;
			draw g withcolor blue;
			draw m withcolor blue;
			draw n withcolor blue;
			draw z0 -- z1 withcolor blue;
			draw t withcolor blue;

			r0 = (xpart z2, ypart z4); % top left
			r1 = (xpart z3, ypart z4); % top right
			r2 = (xpart z3, ypart z2); % bottom right
			r3 = (xpart z2, ypart z2); % bottom left

			r
		enddef;

	\stopMPdefinitions

\stopenvironment

